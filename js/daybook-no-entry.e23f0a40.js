"use strict";(self["webpackChunkjournal"]=self["webpackChunkjournal"]||[]).push([[182],{8216:function(e,t){const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],r=e=>{const t=new Date(e);return{day:t.getDate(),month:n[t.getMonth()],yearDay:`${t.getFullYear()}, ${a[t.getDay()]}`}};t["Z"]=r},357:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(6252),r=n(3577),o=n(9963);const s=e=>((0,a.dD)("data-v-4055abfa"),e=e(),(0,a.Cn)(),e),l={class:"entry-title d-flex justify-content-between p-2"},i={class:"text-success fs-3 fw-bold"},c={class:"mx-1 fs-3"},u={class:"mx-2 fs-4 fw-light"},d=(0,a.Uk)(" Borrar "),y=s((()=>(0,a._)("i",{class:"fa fa-trash-alt"},null,-1))),m=[d,y],h=(0,a.Uk)(" Subir foto "),p=s((()=>(0,a._)("i",{class:"fa fa-upload"},null,-1))),g=[h,p],f=s((()=>(0,a._)("hr",null,null,-1))),w={class:"d-flex flex-column px-3 h-75"},v=["src"],b=["src"];function E(e,t,n,s,d,y){const h=(0,a.up)("FabComponent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[d.entry?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",l,[(0,a._)("div",null,[(0,a._)("span",i,(0,r.zw)(y.day),1),(0,a._)("span",c,(0,r.zw)(y.month),1),(0,a._)("span",u,(0,r.zw)(y.yearDay),1)]),(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{accept:"image/png, image/jpeg",type:"file",onChange:t[0]||(t[0]=(...e)=>y.onSelectedImage&&y.onSelectedImage(...e)),ref:"imageSelector"},null,544),[[o.F8,!1]]),d.entry.id?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>y.onDeleteEntry&&y.onDeleteEntry(...e)),class:"btn btn-danger mx-2"},m)):(0,a.kq)("",!0),(0,a._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>y.onSelectImage&&y.onSelectImage(...e))},g)])]),f,(0,a._)("div",w,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>d.entry.text=e),placeholder:"¿Que sucedió hoy?"},null,512),[[o.nr,d.entry.text]])]),d.localImage?((0,a.wg)(),(0,a.iD)("img",{key:0,src:d.localImage,alt:"imagen vue",class:"img-thumbnail"},null,8,v)):(0,a.kq)("",!0),d.entry.picture&&!d.localImage?((0,a.wg)(),(0,a.iD)("img",{key:1,src:d.entry.picture,alt:"imagen vue",class:"img-thumbnail"},null,8,b)):(0,a.kq)("",!0)],64)):(0,a.kq)("",!0),(0,a.Wm)(h,{icon:"fa-save","onOn:click":y.saveEntry},null,8,["onOn:click"])],64)}var D=n(3907),k=n(6455),_=n.n(k),x=n(8216),C=n(9669),I=n.n(C);const S="https://api.cloudinary.com/v1_1/dmqlfqt9q/image/upload",F=async e=>{if(e)try{const t=new FormData;t.append("upload_preset","curso-vue"),t.append("file",e);const{data:n}=await I().post(S,t);return n.secure_url}catch(t){return console.log(`Error al cargar la imagen ${t}`),null}};var q=F,$={props:{id:{type:String,required:!0}},components:{FabComponent:(0,a.RC)((()=>n.e(703).then(n.bind(n,8703))))},data(){return{entry:null,localImage:null,file:null}},computed:{...(0,D.Se)("journal",["getEntriesById"]),day(){const{day:e}=(0,x.Z)(this.entry.date);return e},month(){const{month:e}=(0,x.Z)(this.entry.date);return e},yearDay(){const{yearDay:e}=(0,x.Z)(this.entry.date);return e}},methods:{...(0,D.nv)("journal",["updateEntry","createEntry","deleteEntry"]),loadEntry(){let e;"new"===this.id?e={text:"",date:(new Date).getTime()}:(e=this.getEntriesById(this.id),e||this.$router.push({name:"no-entry"})),this.entry=e},async saveEntry(){new(_())({title:"Espere porfavor",allowOutsideClick:!1}),_().showLoading();const e=await q(this.file);this.entry.picture=e,this.entry.id?await this.updateEntry(this.entry):this.createEntry(this.entry).then((e=>{this.$router.push({name:"entry",params:{id:e}})})),this.file=null,_().fire("Guardado","Entrada registrada con exito","success")},async onDeleteEntry(){const{isConfirmed:e}=await _().fire({title:"¿Estas seguro?",text:"Una vez borrado no se puede recuperar",showDenyButton:!0,confirmButtonText:"Si, estoy seguro"});e&&(new(_())({title:"Espere porfavor",allowOutsideClick:!1}),_().showLoading(),await this.deleteEntry(this.entry.id),this.$router.push({name:"no-entry"}),_().fire("Eliminado","","success"))},onSelectedImage(e){const t=e.target.files[0];if(!t)return this.localImage=null,void(this.file=null);this.file=t;const n=new FileReader;n.onload=()=>this.localImage=n.result,n.readAsDataURL(t)},onSelectImage(){this.$refs.imageSelector.click()}},created(){this.loadEntry()},watch:{id(){this.loadEntry()}}},j=n(3744);const O=(0,j.Z)($,[["render",E],["__scopeId","data-v-4055abfa"]]);var Z=O},3760:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var a=n(6252);const r=e=>((0,a.dD)("data-v-819ccd4c"),e=e(),(0,a.Cn)(),e),o={class:"d-flex justify-content-center"},s=r((()=>(0,a._)("h1",{class:"align-self-center"},"No hay nada seleccionado",-1)));function l(e,t,n,r,l,i){const c=(0,a.up)("FabComponent");return(0,a.wg)(),(0,a.iD)("div",o,[s,(0,a.Wm)(c,{"onOn:click":i.createNewEntry},null,8,["onOn:click"])])}var i={components:{FabComponent:(0,a.RC)((()=>n.e(703).then(n.bind(n,8703))))},methods:{createNewEntry(){this.$router.push({name:"entry",params:{id:"new"}})}}},c=n(3744);const u=(0,c.Z)(i,[["render",l],["__scopeId","data-v-819ccd4c"]]);var d=u}}]);
//# sourceMappingURL=daybook-no-entry.e23f0a40.js.map